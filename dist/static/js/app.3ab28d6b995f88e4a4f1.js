webpackJsonp([1],{121:function(t,e,s){function n(t){s(132)}var r=s(1)(s(123),s(142),n,null,null);t.exports=r.exports},123:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(2);e.default={name:"app",methods:{goHome:function(){n.a.push("/")}}}},124:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},125:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(2),r=s(128),a=s(140),i=s.n(a);e.default={name:"search",data:function(){return{loading:!0,error:null,query:"",index:"",start:0,size:0,currentPage:1,meta:{},hits:[]}},computed:{end:function(){return Math.min(this.meta.total,this.start+this.size)},hasResults:function(){return this.meta.total>0},hasQuery:function(){return this.query.length>0},totalPage:function(){return Math.ceil(this.meta.total/this.size)},totalMax:function(){return Math.min(this.meta.total,1e4)}},methods:{updateQuery:function(t){t=t||this.$route;var e=t.query;this.query=(e.q||"").trim(),this.index=(e.index||"").trim(),this.start=parseInt(e.start)||0,this.size=parseInt(e.size)||20,this.currentPage=Math.ceil((this.start+1)/this.size)},loadResults:function(){var t=this;r.a.search({index:r.a.defaultIndex||this.index,query:this.query,start:this.start,size:this.size}).then(function(e){t.meta=e.meta,t.hits=e.hits,t.loading=!1},function(e){t.error={title:e.statusCode+" "+e.displayName,description:e.message},t.loading=!1})},gotoPage:function(t){var e=(t-1)*this.size;n.a.push({name:"search",query:{q:this.query,start:e,size:this.size}})}},watch:{$route:function(t,e){this.updateQuery(t),this.loading=!0,this.loadResults()}},beforeMount:function(){this.updateQuery(),this.query||(this.loading=!1)},mounted:function(){this.loading&&this.loadResults()},components:{SearchResults:i.a}}},126:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(2);e.default={name:"search-form",props:["inline","placeholder","size","icon"],data:function(){return{q:this.$route.query.q}},methods:{submit:function(t){t.preventDefault(),n.a.push({name:"search",query:{q:this.q}})}}}},127:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["items","query"]}},128:function(t,e,s){"use strict";function n(t){var e=t.highlight.text||t.fields.text||[],s=t.fields.title||[],n=t.highlight.title||t.fields.title||[],a=t.highlight.url||t.fields.url||[],i=t.fields.headers||{},o=i["last-modified"],u=o?new Date(o):null;return{title:(s[0]||"").trim(),title_h:n[0]||"[UNTITLED]",exerpt:e.join(" ... "),url:t.fields.url[0],url_h:a[0],date:u,depth:t.fields.depth[0],pretty_date:e?r(u):""}}function r(t){return isNaN(t)||null===t?"":new Date-t>180*l?o()(t).format("YYYY-MM-DD"):o()(t).fromNow()}var a=s(130),i=(s.n(a),s(0)),o=s.n(i),u=new a.Client({httpAuth:"elastic:changeme",host:{host:"",port:"",path:"/api"}});u.defaultIndex="webpages",u.queryBody=function(t,e,s){return{size:s,from:e,query:t,highlight:{number_of_fragments:2,fragment_size:200,fields:{title:{},url:{},text:{}}},stored_fields:["title","url","headers.last-modified","headers.date","depth"],_source:!1}},u._search=u.search;var l=864e5;u.search=function(t){var e=t.query;return"string"==typeof e&&(e={multi_match:{query:e,fields:["title^3","url","text"]}}),u._search({index:t.index,body:u.queryBody(e,t.start,t.size)}).then(function(t){return{meta:{took:t.took/1e3,total:t.hits.total},hits:t.hits.hits.map(n)}})},e.a=u},129:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(3),r=(s.n(n),s(5)),a=s.n(r),i=s(4),o=s(122),u=s.n(o),l=s(121),c=s.n(l),h=s(2),d=s(3);s.n(d);i.default.config.productionTip=!1,i.default.use(u.a),i.default.use(a.a),new i.default({el:"#app",router:h.a,template:"<App/>",components:{App:c.a}})},131:function(t,e){},132:function(t,e){},133:function(t,e){},134:function(t,e){},135:function(t,e){},136:function(t,e,s){function n(t){return s(r(t))}function r(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./af":6,"./af.js":6,"./ar":13,"./ar-dz":7,"./ar-dz.js":7,"./ar-kw":8,"./ar-kw.js":8,"./ar-ly":9,"./ar-ly.js":9,"./ar-ma":10,"./ar-ma.js":10,"./ar-sa":11,"./ar-sa.js":11,"./ar-tn":12,"./ar-tn.js":12,"./ar.js":13,"./az":14,"./az.js":14,"./be":15,"./be.js":15,"./bg":16,"./bg.js":16,"./bn":17,"./bn.js":17,"./bo":18,"./bo.js":18,"./br":19,"./br.js":19,"./bs":20,"./bs.js":20,"./ca":21,"./ca.js":21,"./cs":22,"./cs.js":22,"./cv":23,"./cv.js":23,"./cy":24,"./cy.js":24,"./da":25,"./da.js":25,"./de":28,"./de-at":26,"./de-at.js":26,"./de-ch":27,"./de-ch.js":27,"./de.js":28,"./dv":29,"./dv.js":29,"./el":30,"./el.js":30,"./en-au":31,"./en-au.js":31,"./en-ca":32,"./en-ca.js":32,"./en-gb":33,"./en-gb.js":33,"./en-ie":34,"./en-ie.js":34,"./en-nz":35,"./en-nz.js":35,"./eo":36,"./eo.js":36,"./es":38,"./es-do":37,"./es-do.js":37,"./es.js":38,"./et":39,"./et.js":39,"./eu":40,"./eu.js":40,"./fa":41,"./fa.js":41,"./fi":42,"./fi.js":42,"./fo":43,"./fo.js":43,"./fr":46,"./fr-ca":44,"./fr-ca.js":44,"./fr-ch":45,"./fr-ch.js":45,"./fr.js":46,"./fy":47,"./fy.js":47,"./gd":48,"./gd.js":48,"./gl":49,"./gl.js":49,"./gom-latn":50,"./gom-latn.js":50,"./he":51,"./he.js":51,"./hi":52,"./hi.js":52,"./hr":53,"./hr.js":53,"./hu":54,"./hu.js":54,"./hy-am":55,"./hy-am.js":55,"./id":56,"./id.js":56,"./is":57,"./is.js":57,"./it":58,"./it.js":58,"./ja":59,"./ja.js":59,"./jv":60,"./jv.js":60,"./ka":61,"./ka.js":61,"./kk":62,"./kk.js":62,"./km":63,"./km.js":63,"./kn":64,"./kn.js":64,"./ko":65,"./ko.js":65,"./ky":66,"./ky.js":66,"./lb":67,"./lb.js":67,"./lo":68,"./lo.js":68,"./lt":69,"./lt.js":69,"./lv":70,"./lv.js":70,"./me":71,"./me.js":71,"./mi":72,"./mi.js":72,"./mk":73,"./mk.js":73,"./ml":74,"./ml.js":74,"./mr":75,"./mr.js":75,"./ms":77,"./ms-my":76,"./ms-my.js":76,"./ms.js":77,"./my":78,"./my.js":78,"./nb":79,"./nb.js":79,"./ne":80,"./ne.js":80,"./nl":82,"./nl-be":81,"./nl-be.js":81,"./nl.js":82,"./nn":83,"./nn.js":83,"./pa-in":84,"./pa-in.js":84,"./pl":85,"./pl.js":85,"./pt":87,"./pt-br":86,"./pt-br.js":86,"./pt.js":87,"./ro":88,"./ro.js":88,"./ru":89,"./ru.js":89,"./sd":90,"./sd.js":90,"./se":91,"./se.js":91,"./si":92,"./si.js":92,"./sk":93,"./sk.js":93,"./sl":94,"./sl.js":94,"./sq":95,"./sq.js":95,"./sr":97,"./sr-cyrl":96,"./sr-cyrl.js":96,"./sr.js":97,"./ss":98,"./ss.js":98,"./sv":99,"./sv.js":99,"./sw":100,"./sw.js":100,"./ta":101,"./ta.js":101,"./te":102,"./te.js":102,"./tet":103,"./tet.js":103,"./th":104,"./th.js":104,"./tl-ph":105,"./tl-ph.js":105,"./tlh":106,"./tlh.js":106,"./tr":107,"./tr.js":107,"./tzl":108,"./tzl.js":108,"./tzm":110,"./tzm-latn":109,"./tzm-latn.js":109,"./tzm.js":110,"./uk":111,"./uk.js":111,"./ur":112,"./ur.js":112,"./uz":114,"./uz-latn":113,"./uz-latn.js":113,"./uz.js":114,"./vi":115,"./vi.js":115,"./x-pseudo":116,"./x-pseudo.js":116,"./yo":117,"./yo.js":117,"./zh-cn":118,"./zh-cn.js":118,"./zh-hk":119,"./zh-hk.js":119,"./zh-tw":120,"./zh-tw.js":120};n.keys=function(){return Object.keys(a)},n.resolve=r,t.exports=n,n.id=136},137:function(t,e,s){function n(t){s(135)}var r=s(1)(s(124),s(145),n,null,null);t.exports=r.exports},138:function(t,e,s){function n(t){s(131)}var r=s(1)(s(125),s(141),n,null,null);t.exports=r.exports},139:function(t,e,s){function n(t){s(133)}var r=s(1)(s(126),s(143),n,null,null);t.exports=r.exports},140:function(t,e,s){function n(t){s(134)}var r=s(1)(s(127),s(144),n,null,null);t.exports=r.exports},141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"search-results container"},[t.loading?t._e():s("div",{staticClass:"results"},[t.hasQuery?t._e():s("p",{staticClass:"no-results"},[t._v("\n      What do you want to search today?\n    ")]),t._v(" "),t.hasQuery&&!t.hasResults?s("p",{staticClass:"no-results"},[t._v("\n      Nothing Found. :(\n    ")]):t._e(),t._v(" "),t.error?s("el-alert",{attrs:{type:"error","show-icon":"",title:t.error.title,description:t.error.description}}):t._e(),t._v(" "),t.hasResults?s("div",{staticClass:"results"},[s("p",{staticClass:"results-count text-sm"},[t._v("\n        "+t._s(t.start+1)+" to "+t._s(t.end)+" of "+t._s(t.meta.total)+" results ("+t._s(t.meta.took)+" seconds)\n      ")]),t._v(" "),s("search-results",{attrs:{query:t.query,items:t.hits}}),t._v(" "),s("el-pagination",{attrs:{layout:"prev, pager, next",total:t.totalMax,"page-size":t.size,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.gotoPage}})],1):t._e()],1)])},staticRenderFns:[]}},142:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",["home"!=this.$route.name?s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:3,xs:5}},[s("router-link",{staticClass:"site-logo",attrs:{to:"/"}},[t._v("\n          Vuelastic Search\n        ")])],1),t._v(" "),s("el-col",{attrs:{span:18}},[s("search-form",{attrs:{inline:"",icon:"search",size:"76"}})],1)],1):t._e()],1),t._v(" "),s("div",{staticClass:"main"},[s("el-row",[s("el-col",{attrs:{span:21,offset:3,xs:{offset:0,span:24}}},[s("router-view")],1)],1)],1),t._v(" "),s("footer",[s("div",{staticClass:"container"},[s("el-row",[s("el-col",{attrs:{span:21,offset:3,xs:{offset:0,span:24}}},[t._v("\n          Â© 2017 "),s("a",{attrs:{href:"http://github.com/ktmud/vuelastic",target:"_blank"}},[t._v("Vuelastic Search")]),t._v("\n                 by "),s("a",{attrs:{href:"http://github.com/ktmud",target:"_blank"}},[t._v("ktmud")])])],1)],1)])])},staticRenderFns:[]}},143:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-form",{staticClass:"search-form",attrs:{inline:t.inline,action:"/search"}},[s("el-input",{attrs:{"on-icon-click":t.submit,required:"",size:t.size,icon:t.icon,placeholder:t.placeholder},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.submit(e)}},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},144:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"results"},[t._l(t.items,function(e,n){return s("div",{staticClass:"result-item"},[s("h4",[s("a",{attrs:{href:e.url,target:"_blank",title:e.title}},[s("span",{domProps:{innerHTML:t._s(e.title_h)}})]),t._v(" "),s("el-tooltip",{attrs:{content:"Link depth: "+e.depth,placement:"right"}},[s("span",{staticClass:"badge"},[t._v(t._s(e.depth))])])],1),t._v(" "),s("p",{staticClass:"result-url",domProps:{innerHTML:t._s(e.url_h)}}),t._v(" "),e.exerpt?s("p",{staticClass:"result-desc"},[e.pretty_date?s("span",{staticClass:"result-date"},[t._v(t._s(e.pretty_date)+" -")]):t._e(),t._v(" "),s("span",{staticClass:"result-exerpt",domProps:{innerHTML:t._s(e.exerpt)}})]):t._e()])}),t._v(" "),0==t.items.length?s("div",{staticClass:"no-result"},[t._v("No more results can be found.")]):t._e()],2)},staticRenderFns:[]}},145:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home container"},[s("h1",[t._v("Vuelastic Search")]),t._v(" "),s("search-form",{staticClass:"big-search",attrs:{icon:"search"}})],1)},staticRenderFns:[]}},2:function(t,e,s){"use strict";var n=s(3),r=(s.n(n),s(5)),a=s.n(r),i=s(4),o=s(146),u=s(137),l=s.n(u),c=s(138),h=s.n(c),d=s(139),f=s.n(d);i.default.use(a.a),i.default.use(o.a),i.default.component(f.a.name,f.a),e.a=new o.a({mode:"history",routes:[{path:"/",name:"home",component:l.a},{path:"/search",name:"search",component:h.a}]})},3:function(t,e){}},[129]);
//# sourceMappingURL=app.3ab28d6b995f88e4a4f1.js.map